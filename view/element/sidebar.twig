<aside id="sidebar" class="text-white border-r border-zinc-200/10 bg-gradient-to-b from-zinc-900/100 to-zinc-950/100 backdrop-blur flex flex-col h-full w-64">
    <div class="px-6 py-2">
        {# USER INFO #}
        <div class="flex flex-col items-center space-y-0">
            {# PROFILE IMAGE #}
            <div class="h-20 w-20 rounded-full overflow-hidden border-2 border-zinc-700/50">
                {% if getUserData().getProfilePic == 'default_pic' %}
                    <img class="h-full w-full object-cover" src={{ asset('/assets/images/default-profile.jpg') }} alt="profile picture">
                {% else %}
                    <img class="h-full w-full object-cover" src="data:image/jpeg;base64,{{ getUserData().getProfilePic|e }}" alt="profile picture">
                {% endif %}
            </div>
            
            {# USERNAME AND ROLE #}
            <div class="text-center">
                <h3 id="username" class="font-medium text-2xl text-zinc-100">{{ getUserData().username|e }}</h3>
                <span id="role" class="inline-block px-2 py-1 rounded-full text-xs font-medium mt-0
                    {% if isAdmin() %}
                        bg-red-500/10 text-red-400
                    {% else %}
                        bg-emerald-500/10 text-emerald-400
                    {% endif %}">
                    {{ getUserData().role|lower|e }}
                </span>
            </div>
        </div>
    </div>

    {# NAVIGATION #}
    <nav class="px-1 space-y-0 mb-0">
        <ul>
            {# MAIN SITE LINK #}
            {% set currentUrl = app.request.getSchemeAndHttpHost() %}
            {% if currentUrl matches '/admin/' %}
                {% set newUrl = currentUrl|replace({'admin.': ''}) %}
                <a href="{{ newUrl }}/admin" target="_blank" class="flex items-center space-x-3 px-3 py-2 rounded text-zinc-300 hover:text-white hover:bg-white/5 bg-white/5 mb-[2px] transition-colors">
                    <i class="fas fa-globe h-5 w-5"></i>
                    <span>Main site</span>
                </a>
            {% endif %}

            {# MENU ITEMS #}
            {% set menuItems = [
                {'route': 'app_dashboard', 'icon': 'fas fa-desktop', 'label': 'Dashboard'},
                {'route': 'app_manager_logs', 'icon': 'fas fa-list', 'label': 'Logs'},
                {'route': 'app_manager_database', 'icon': 'fas fa-database', 'label': 'Database'},
                {'route': 'app_metrics_dashboard', 'icon': 'fas fa-chart-line', 'label': 'Metrics'},
                {'route': 'app_manager_monitoring', 'icon': 'fa fa-briefcase-medical', 'label': 'Monitoring'},
                {'route': 'app_diagnostic', 'icon': 'fas fa-check', 'label': 'Diagnostics'},
                {'route': 'app_system_audit', 'icon': 'fas fa-columns', 'label': 'System audit'},
                {'route': 'app_file_system_browser', 'icon': 'fas fa-file-export', 'label': 'Filesystem'},
                {'route': 'app_terminal', 'icon': 'fas fa-terminal', 'label': 'Terminal'},
                {'route': 'app_todo_manager', 'icon': 'fas fa-tasks', 'label': 'Todos'},
                {'route': 'app_manager_users', 'icon': 'fas fa-users', 'label': 'Users'},
                {'route': 'app_account_settings_table', 'icon': 'fas fa-user-cog', 'label': 'Account settings'}
            ] %}

            {% for item in menuItems %}
                <li>
                    <a href={{ path(item.route) }} class="flex items-center pl-1 px-1 py-[6px] rounded text-zinc-300 hover:text-white bg-white/5 mb-[2px] transition-colors">
                        <i class="{{ item.icon }} h-5 w-5 mt-[8px] mr-1 ml-1"></i>
                        <span>
                            {{ item.label }}
                            {% if item.route == 'app_todo_manager' and getTodosCount() > 0 %}
                                <span class="ml-1 px-2 py-0.5 text-xs rounded-full bg-zinc-700">
                                    {{ getTodosCount() }}
                                </span>
                            {% endif %}
                        </span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </nav>
</aside>

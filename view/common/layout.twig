{% extends 'common/base.twig' %}

{# MAIN ADMIN COMPONENT LAYOUT #}
{% block body %}
    {# REDIRECT TO ERROR PAGE IF JAVASCRIPT IS DISABLED #}
    <noscript>
        <meta http-equiv="refresh" content="0; URL='{{ path('app_error_by_code', {code: '426'}) }}'">
    </noscript>

    {# PROFILE VIEWER MODAL #}
    {% include "component/users-manager/popup/profile-viewer-popup.twig" %}

    {# LOADER COMPONENT #}
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div class="loading-text">Loading Admin Suite</div>
        <div class="loading-subtext">Please wait while we prepare your dashboard...</div>
    </div>
    
    {# MAIN NAVBAR #}
    {% include 'element/navigation.twig' %}

    {# SIDEBAR #}
    {% include "element/sidebar.twig" %}
    
    {# MAIN COMPONENT INIT #}
    <main id="main-content" class="md:active bg-gray-900 flex flex-col">
        {% block component %}{% endblock %}
    </main>

    {# SIDEBAR TOGGLE SCRIPT #}
    {{ encore_entry_script_tags('sidebar-element-js') }}

    {# DEFAUTL TOGGLE SIDEBAR ON NON MOBILE DEVICES #}
    {% if app.request.attributes.get('_route') == 'app_dashboard' %}
        {{ encore_entry_script_tags('sidebar-toggle-js') }}
    {% endif %}

    {# REGISTER JAVASCRIPT ASSETS #}
    {{ encore_entry_script_tags('loading-component-js') }}
    {{ encore_entry_script_tags('notification-subscriber-js') }}
    {{ encore_entry_script_tags('profile-photo-view-toggle-js') }}
{% endblock %}

{% extends 'common/base.twig' %}

{# USER LOGIN COMPONENT #}
{% block body %}
<div class="auth-component flex justify-center items-center h-screen" style="background: transparent;">
	<div class="mt-5 max-w-md w-full px-6 py-5 mb-5 rounded-lg backdrop-blur-sm bg-gray-800/50 border border-gray-700/50 shadow-2xl mx-4">
		<div class="px-2 py-2 mb-6">
			<div class="flex items-center justify-center">
				<h2 class="text-2xl text-white font-bold tracking-wide">Login</h2>
			</div>
		</div>

        {# EMPTY USER LIST ALERT BOX (FIRST USER REGISTER) #}
		{% if isUsersEmpty %}
			<div class="bg-orange-500/20 border-l-4 border-orange-500 text-white p-4 mb-4 rounded-r-lg backdrop-blur-sm">
				<div class="flex items-start gap-3">
					<div class="w-5 h-5 bg-orange-500/30 rounded-full flex items-center justify-center mt-0.5">
						<i class="fas fa-exclamation text-orange-500 text-xs"></i>
					</div>
					<div>
						<h4 class="font-semibold text-sm mb-1 text-orange-200">First Time Setup</h4>
						<p class="text-sm text-orange-100">Users table is empty. You can register <a href={{ path('app_auth_register') }} class="text-blue-400 font-medium hover:text-blue-300 underline transition-colors duration-200">here</a></p>
					</div>
				</div>
			</div>
		{% endif %}

        {# SUCCESS MESSAGE BOX #}
		{% for message in app.flashes('success') %}
			<div class="bg-gray-700/40 border-l-4 border-green-400 text-white p-4 mb-4 rounded-r-lg backdrop-blur-sm">
				<div class="flex items-start gap-3">
					<div class="w-5 h-5 bg-green-400/20 rounded-full flex items-center justify-center mt-0.5">
						<i class="fas fa-check text-green-400 text-xs"></i>
					</div>
					<div>
						<h4 class="font-semibold text-sm mb-1">Success</h4>
						<p class="text-sm text-gray-300">{{ message|e }}</p>
					</div>
				</div>
			</div>
		{% endfor %}

        {# ERROR MESSAGE BOX #}
		{% for message in app.flashes('error') %}
			<div class="bg-red-500/20 border-l-4 border-red-500 text-white p-4 mb-4 rounded-r-lg backdrop-blur-sm">
				<div class="flex items-start gap-3">
					<div class="w-5 h-5 bg-red-500/30 rounded-full flex items-center justify-center mt-0.5">
						<i class="fas fa-times text-red-500 text-xs"></i>
					</div>
					<div>
						<h4 class="font-semibold text-sm mb-1 text-red-200">Error</h4>
						<p class="text-sm text-red-100">{{ message|e }}</p>
					</div>
				</div>
			</div>
		{% endfor %}

        {# LOGIN FORM #}
		{{ form_start(loginForm) }}
            {# FORM FIELDS #}
			<div class="space-y-4 mb-4">
				{{ form_row(loginForm.username, {'attr': {'class': 'auth-form-input', 'placeholder': 'Username'}}) }}
				{{ form_row(loginForm.password, {'attr': {'class': 'auth-form-input', 'placeholder': 'Password'}}) }}
			</div>

            {# REMEMBER ME CHECKBOX #}
			<div class="flex items-center gap-3 mb-6 ml-[2px]">
				{{ form_widget(loginForm.remember, {'attr': {'class': 'mega-checkbox'}}) }}
				<label for="login_form_remember" class="text-gray-200 font-medium text-sm cursor-pointer">Remember me</label>
			</div>

            {# FORM SUBMIT BUTTON #}
			<button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-blue-500/25 border border-blue-500/30">
				<span>Login</span>
			</button>
		{{ form_end(loginForm) }}
	</div>
</div>
{% endblock %}
